window.TApi.image=(function(a){var b=a.image||{};var e=200*10000;var d=0.3;var c="image/jpeg";b.getContentType=function(){return c};b.base64ToBinary=function(g){var h=window.atob(g.split(",")[1]),f=[];for(var i=0;i<h.length;i++){f[i]=h.charCodeAt(i)}return f};b.createObjectUrl=function(g){var f;if(window.webkitURL){f=window.webkitURL.createObjectURL(g)}else{if(window.URL){f=window.URL.createObjectURL(g)}else{if(window.createObjectURL){f=window.createObjectURL(g)}}}return f};b.compressFile=function(f,g){b.compressUrl(b.createObjectUrl(f),function(h){if(g){g(h,f)}})};b.compressUrl=function(g,h){var f=new Image();f.src=g;b.compress(f,function(i){if(h){h(i,g)}})};b.compress=function(f,h){function g(){var o=document.createElement("canvas"),l=o.getContext("2d");var k=f.src.length,n=f.width,i=f.height;var m;if((m=n*i/e)>1){m=Math.sqrt(m);n/=m;i/=m}o.width=n;o.height=i;l.fillStyle="#fff";l.fillRect(0,0,o.width,o.height);l.drawImage(f,0,0,n,i);var j=o.toDataURL(c,d);o.width=o.height=0;if(h){h(j,f)}}if(f.complete){g()}else{f.onload=g}};return b})(window.TApi||{});
